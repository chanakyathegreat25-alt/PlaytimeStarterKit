[gd_scene load_steps=18 format=4 uid="uid://cjqgt71jp0xmh"]

[ext_resource type="Material" uid="uid://dl7krlcnai0qx" path="res://Level/Assets/Materials/ProtoDark.tres" id="1_fewn2"]
[ext_resource type="PackedScene" uid="uid://dkty77argxwyc" path="res://Player/player.tscn" id="2_2v2lr"]
[ext_resource type="PackedScene" uid="uid://cxbtcmk7ewecu" path="res://Objects/Gameplay/ControlPanel/control_panel_base.tscn" id="2_6dakb"]
[ext_resource type="PackedScene" uid="uid://sl4xqapufauq" path="res://Objects/Gameplay/ControlPanel/control_panel_keypad.tscn" id="3_knc6i"]
[ext_resource type="PackedScene" uid="uid://cd47wb6hqy68j" path="res://Objects/Gameplay/ControlPanel/keypad.tscn" id="4_n63bf"]
[ext_resource type="PackedScene" uid="uid://dyr40ig1p5la1" path="res://Objects/Gameplay/HandFunctions/item_hand.tscn" id="5_knc6i"]
[ext_resource type="PackedScene" uid="uid://cn6s3f1x5eiy4" path="res://Objects/Gameplay/ControlPanel/keycard_reader.tscn" id="5_n63bf"]
[ext_resource type="PackedScene" uid="uid://cci31kuqdnklx" path="res://Objects/Gameplay/Gates/gate.tscn" id="6_btun3"]
[ext_resource type="Script" uid="uid://ckdvdouxaw4it" path="res://Objects/Gameplay/Puzzles/ConnectionComponents/puzzle_gate_linker.gd" id="7_k63y4"]
[ext_resource type="PackedScene" uid="uid://d0a61yl37s346" path="res://Objects/Gameplay/ControlPanel/keycard.tscn" id="7_xfif6"]
[ext_resource type="Script" uid="uid://cr7vgioayori4" path="res://Objects/VFX/WireCurves/power_cable.gd" id="8_k63y4"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_knc6i"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_n63bf"]
sky_material = SubResource("ProceduralSkyMaterial_knc6i")

[sub_resource type="Environment" id="Environment_xfif6"]
background_mode = 2
sky = SubResource("Sky_n63bf")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="Curve3D" id="Curve3D_5e8g2"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -1.62161, 2.89589, -0.132204, 0.126847, 0.180811, 0, -0.126847, -0.180811, 0, -1.59776, 0.286318, -0.132251, 0, 0, 0, 0, 0, 0, -1.89586, 0.122492, -0.132251, 0, 0, 0, 0, 0, 0, -2.08561, 0.139743, -0.132251, 0, 0, 0, 0, 0, 0, -2.19774, 0.221684, -0.132251),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="ArrayMesh" id="ArrayMesh_rtk1f"]
_surfaces = [{
"aabb": AABB(-2.23607, 0.0571313, -0.207251, 0.753094, 2.84188, 0.150047),
"attribute_data": PackedByteArray("AAAAAD9GwD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACU88e/KlfUP6BmB74AAAAAq6oqPgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkc+/UlY5QHBgB74AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkc+/UlY5QHBgB74AAAAAq6oqPj9GwD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACU88e/KlfUP6BmB74AAAAAq6qqPgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkc+/UlY5QHBgB74AAAAAq6qqPj9GwD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACU88e/KlfUP6BmB74AAAAAAAAAPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkc+/UlY5QHBgB74AAAAAAAAAPz9GwD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACU88e/KlfUP6BmB74AAAAAq6oqPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkc+/UlY5QHBgB74AAAAAq6oqPz9GwD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACU88e/KlfUP6BmB74AAAAAVVVVPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkc+/UlY5QHBgB74AAAAAVVVVPz9GwD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACU88e/KlfUP6BmB74AAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkc+/UlY5QHBgB74AAAAAAACAPz9GwD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACU88e/KlfUP6BmB74AAAAAAAAAABYhJT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfJMa/RjVFP+FqB74AAAAAq6oqPhYhJT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfJMa/RjVFP+FqB74AAAAAq6qqPhYhJT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfJMa/RjVFP+FqB74AAAAAAAAAPxYhJT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfJMa/RjVFP+FqB74AAAAAq6oqPxYhJT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfJMa/RjVFP+FqB74AAAAAVVVVPxYhJT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfJMa/RjVFP+FqB74AAAAAAACAPxYhJT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfJMa/RjVFP+FqB74AAAAAAAAAAI0GSz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACPg8y/SpiSPtBsB74AAAAAq6oqPo0GSz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACPg8y/SpiSPtBsB74AAAAAq6qqPo0GSz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACPg8y/SpiSPtBsB74AAAAAAAAAP40GSz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACPg8y/SpiSPtBsB74AAAAAq6oqP40GSz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACPg8y/SpiSPtBsB74AAAAAVVVVP40GSz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACPg8y/SpiSPtBsB74AAAAAAACAP40GSz8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACPg8y/SpiSPtBsB74AAAAAAAAAALscVj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUU9m//t08PtBsB74AAAAAq6oqPrscVj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUU9m//t08PtBsB74AAAAAq6qqPrscVj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUU9m//t08PtBsB74AAAAAAAAAP7scVj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUU9m//t08PtBsB74AAAAAq6oqP7scVj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUU9m//t08PtBsB74AAAAAVVVVP7scVj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUU9m//t08PtBsB74AAAAAAACAP7scVj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUU9m//t08PtBsB74AAAAAAAAAAJF5Xj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyruW/IeELPtBsB74AAAAAq6oqPpF5Xj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyruW/IeELPtBsB74AAAAAq6qqPpF5Xj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyruW/IeELPtBsB74AAAAAAAAAP5F5Xj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyruW/IeELPtBsB74AAAAAq6oqP5F5Xj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyruW/IeELPtBsB74AAAAAVVVVP5F5Xj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyruW/IeELPtBsB74AAAAAAACAP5F5Xj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAyruW/IeELPtBsB74AAAAAAAAAAHU3ZD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQDu+/DHMBPtBsB74AAAAAq6oqPnU3ZD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQDu+/DHMBPtBsB74AAAAAq6qqPnU3ZD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQDu+/DHMBPtBsB74AAAAAAAAAP3U3ZD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQDu+/DHMBPtBsB74AAAAAq6oqP3U3ZD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQDu+/DHMBPtBsB74AAAAAVVVVP3U3ZD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQDu+/DHMBPtBsB74AAAAAAACAP3U3ZD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQDu+/DHMBPtBsB74AAAAAAAAAAJptZj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvq/K/RN36PdBsB74AAAAAq6oqPpptZj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvq/K/RN36PdBsB74AAAAAq6qqPpptZj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvq/K/RN36PdBsB74AAAAAAAAAP5ptZj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvq/K/RN36PdBsB74AAAAAq6oqP5ptZj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvq/K/RN36PdBsB74AAAAAVVVVP5ptZj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvq/K/RN36PdBsB74AAAAAAACAP5ptZj8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvq/K/RN36PdBsB74AAAAAAAAAACA4dT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzegXAyhgPPtBsB74AAAAAq6oqPiA4dT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzegXAyhgPPtBsB74AAAAAq6qqPiA4dT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzegXAyhgPPtBsB74AAAAAAAAAPyA4dT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzegXAyhgPPtBsB74AAAAAq6oqPyA4dT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzegXAyhgPPtBsB74AAAAAVVVVPyA4dT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzegXAyhgPPtBsB74AAAAAAACAPyA4dT8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzegXAyhgPPtBsB74AAAAAAAAAAAAAgD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTpwzABwFjPtBsB74AAAAAq6oqPgAAgD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTpwzABwFjPtBsB74AAAAAq6qqPgAAgD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTpwzABwFjPtBsB74AAAAAAAAAPwAAgD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTpwzABwFjPtBsB74AAAAAq6oqPwAAgD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTpwzABwFjPtBsB74AAAAAVVVVPwAAgD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTpwzABwFjPtBsB74AAAAAAACAPwAAgD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTpwzABwFjPtBsB74AAAAA"),
"format": 34360258807,
"index_count": 354,
"index_data": PackedByteArray("AAABAAIAAAADAAEAAwAEAAEAAwAFAAQABQAGAAQABQAHAAYABwAIAAYABwAJAAgACQAKAAgACQALAAoACwAMAAoACwANAAwADgADAAAADgAPAAMADwAFAAMADwAQAAUAEAAHAAUAEAARAAcAEQAJAAcAEQASAAkAEgALAAkAEgATAAsAEwANAAsAEwAUAA0AFQAPAA4AFQAWAA8AFgAQAA8AFgAXABAAFwARABAAFwAYABEAGAASABEAGAAZABIAGQATABIAGQAaABMAGgAUABMAGgAbABQAHAAWABUAHAAdABYAHQAXABYAHQAeABcAHgAYABcAHgAfABgAHwAZABgAHwAgABkAIAAaABkAIAAhABoAIQAbABoAIQAiABsAIwAdABwAIwAkAB0AJAAeAB0AJAAlAB4AJQAfAB4AJQAmAB8AJgAgAB8AJgAnACAAJwAhACAAJwAoACEAKAAiACEAKAApACIAKgAkACMAKgArACQAKwAlACQAKwAsACUALAAmACUALAAtACYALQAnACYALQAuACcALgAoACcALgAvACgALwApACgALwAwACkAMQArACoAMQAyACsAMgAsACsAMgAzACwAMwAtACwAMwA0AC0ANAAuAC0ANAA1AC4ANQAvAC4ANQA2AC8ANgAwAC8ANgA3ADAAOAAyADEAOAA5ADIAOQAzADIAOQA6ADMAOgA0ADMAOgA7ADQAOwA1ADQAOwA8ADUAPAA2ADUAPAA9ADYAPQA3ADYAPQA+ADcAPwA5ADgAPwBAADkAQAA6ADkAQABBADoAQQA7ADoAQQBCADsAQgA8ADsAQgBDADwAQwA9ADwAQwBEAD0ARAA+AD0ARABFAD4ARABDAEIAQgBBAEAARABCAEAAQAA/AEUARQBEAEAAAQAKAAwADAACAAEAAQAGAAoAAQAEAAYABgAIAAoA"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 70,
"vertex_data": PackedByteArray("DaS/vzeb1D9uAMK9AJHPv0xWOUCMTmq9HUPHv26JOUAL9MG9lPPHvx5X1D9MZ2q9497XvzAjOUAb9MG9G0PQvxET1D94AMK9497XvzYjOUDaxi2+G0PQvx0T1D8JzS2+AJHPv1hWOUA9LVS+lPPHvzZX1D9tM1S+HUPHv3SJOUDSxi2+DaS/v0Ob1D8EzS2+HUPHv26JOUAL9MG9DaS/vzeb1D9uAMK9CdK9v698RD/8CMK9HyTGvzE1RT9QeGq9NXbOv8jtRT/uCMK9NXbOv93tRT9E0S2+HyTGv1s1RT+uN1S+CdK9v8R8RD9L0S2+CdK9v698RD/8CMK9sYrEv8aZgz4EDcK9kIPMvzSYkj4MgGq9bXzUv7iWoT6iDMK9bXzUv86WoT4e0y2+joPMv2CYkj6dOVS+sYrEv9yZgz5P0y2+sYrEv8aZgz4EDcK9nmDUvypBBj4EDcK9UlPZv+fdPD4MgGq9CEbev7x6cz6iDMK9Ckbev9J6cz4e0y2+VlPZvxXePD6dOVS+oGDUv0BBBj5P0y2+nmDUvypBBj4EDcK9vzLjv6b6lj0EDcK9Ma7lvwbhCz4MgGq9pCnov9NETD6iDMK9pSnov+9ETD4e0y2+M67lvzzhCz6dOVS+wDLjv936lj1P0y2+vzLjv6b6lj0EDcK9uentv8xJfj0GDcK9zw7vv+5yAT4MgGq95jPwv4dTQz6gDMK95zPwv6VTQz4d0y2+0Q7vvypzAT6dOVS+uuntv0RKfj1Q0y2+uentv8xJfj0GDcK9k3jyv3gCaj0KDcK9b6vyvwTd+j0MgGq9S97yv4ZcQD6cDMK9S97yv6ZcQD4b0y2+b6vyv4Td+j2dOVS+k3jyv/gCaj1S0y2+k3jyv3gCaj0KDcK9mAAHwMUNnT0GDcK9tHoFwK0YDz4MgGq9zvQDwJWqTz6gDMK9zvQDwLKqTz4d0y2+snoFwOcYDz6dOVS+mAAHwP4NnT1Q0y2+mAAHwMUNnT0GDcK9tRsPwLxNLT4EDcK91KcMwPAAYz4MgGq98jMKwB1ajD6iDMK98TMKwClajD4e0y2+0qcMwB4BYz6dOVS+tBsPwNRNLT5P0y2+tRsPwLxNLT4EDcK9ms9mggJZxbWch7fAu0mqsLLGTKD7XFPKAoCZf5Z/AYANSK+YNZq3qJIwUH29p6i1rDkJyzZGKalnAptPAlnFtUge/e5pTsWMZQD7/5Z/AYC4xHjcxh8N20/9krC9p6i1ssZMoPtcU8qaz2aCAlnFtZLOE3yVWUaz73+OfnyBBYDDMOiCgaXss+wDa7GVWUazjv7v/3yBBYAW/TtPgaXss5LOE3yVWUaz/LnsYbtQfqfNfDN5j4loga1C95mUl/eqEx4BxrtQfqcy+cz8j4logQbmUT2Ul/eq/LnsYbtQfqf+pONKpzSwoNJ8sn1bhZCBM1l3sylt0KQcNf/apzSwoLH90vxbhZCBhszMJilt0KT+pONKpzSwoHmTijzAI+CfXXzgfqOEz4FhatjBKlKwq3VDhOzAI+Cf3/5c/KOEz4Elvp0VKlKwq3mTijzAI+CfVYqpNdwclKD/f/9//38AgKl1VMovRaywVUqp9dwclKAAAP7//38AgKm1VQovRaywVYqpNdwclKDhgJovDRdDoT997n/Bgl+BG30bz0s/nLNlUB3/DRdDoe7/P/3Bgl+B47DjAks/nLPhgJovDRdDoVlm40G1AIimOnosgraFFIQylsnAFzMpvuLBWOa1AIim0f3FBbaFFITJQDIWFzMpvllm40G1AIimYEpZZFy32bSIWFOoloRsn6GUmtC0KrnFIUT+5rAkpqIiBrHb8lzxlVgGiGPqaLrAYEpZZFy32bQ=")
}]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_q6awt"]
albedo_color = Color(0, 0, 0, 1)

[node name="test_full_level" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_xfif6")

[node name="CSG" type="Node" parent="."]

[node name="CSGBox3D" type="CSGBox3D" parent="CSG"]
use_collision = true
size = Vector3(12.7, 0.2, 10.3)
material = ExtResource("1_fewn2")

[node name="Puzzle" type="Node" parent="."]

[node name="ControlPanelBase" parent="Puzzle" instance=ExtResource("2_6dakb")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0.1, 2.9)

[node name="ControlPanelKeypad" parent="Puzzle/ControlPanelBase" instance=ExtResource("3_knc6i")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8, 0)

[node name="Keypad" parent="Puzzle/ControlPanelBase/ControlPanelKeypad" instance=ExtResource("4_n63bf")]
transform = Transform3D(-6.93169e-08, 6.18172e-08, -1, -0.707107, 0.707107, 9.27259e-08, 0.707107, 0.707107, -5.30308e-09, 0.1, 0.397067, -0.0531077)
code = 3511

[node name="ControlPanelBase2" parent="Puzzle" instance=ExtResource("2_6dakb")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, -1, 0.1, 2.9)

[node name="KeycardReader" parent="Puzzle/ControlPanelBase2" instance=ExtResource("5_n63bf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8, 0)

[node name="Gates" type="Node" parent="."]

[node name="Gate" parent="Gates" instance=ExtResource("6_btun3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.4, 0, 3.2)

[node name="PuzzleGateLinker" type="Node" parent="Gates/Gate" node_paths=PackedStringArray("connected_gate")]
script = ExtResource("7_k63y4")
connected_gate = NodePath("..")
puzzle = NodePath("../../../Puzzle/ControlPanelBase/ControlPanelKeypad/Keypad")
enable_signal = "code_success"
use_disable_signal = false
metadata/_custom_type_script = "uid://ckdvdouxaw4it"

[node name="Path3D" type="Path3D" parent="Gates/Gate"]
curve = SubResource("Curve3D_5e8g2")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Gates/Gate"]
mesh = SubResource("ArrayMesh_rtk1f")
surface_material_override/0 = SubResource("StandardMaterial3D_q6awt")

[node name="CablePower" type="Node" parent="Gates/Gate" node_paths=PackedStringArray("cable_mesh_node")]
script = ExtResource("8_k63y4")
puzzle = NodePath("../../../Puzzle/ControlPanelBase/ControlPanelKeypad/Keypad")
power_on_signal = "code_success"
powerable_off = false
cable_mesh_node = NodePath("../MeshInstance3D")
metadata/_custom_type_script = "uid://cr7vgioayori4"

[node name="Item" type="Node" parent="."]

[node name="HandItem" parent="Item" instance=ExtResource("5_knc6i")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.2, 0.1, 2.1)

[node name="Keycard" parent="Item" instance=ExtResource("7_xfif6")]
transform = Transform3D(0.5, -0.866025, -2.58096e-08, 0, 2.98023e-08, -1, 0.866025, 0.5, 1.49012e-08, -1.9, 0.109918, 2.5)

[node name="Player" parent="." instance=ExtResource("2_2v2lr")]
